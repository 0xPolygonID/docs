---
id: smart-contracts
title: Smart Contracts
sidebar_label: Smart Contracts
description: Smart Contracts used by the Polygon ID solution.
keywords:
  - docs
  - polygon id
  - smart
  - contract
---


<a href="https://github.com/0xPolygonID/contracts" target="_blank">Polygon ID Smart Contracts - Github</a>

As part of our unified address methodology, we deployed contracts via the CREATE2 EVM opcode. This method ensures that the final address of the contract depends on the contract's initialization bytecode and a salt. To support deployments across various networks, we utilized [CreateX](https://createx.rocks/) contract factories. Specifically, the [deployCreate2](https://github.com/pcaversaccio/createx/blob/main/src/CreateX.sol#L332) method was used to handle the deployments.


## Networks 
We have deployed contracts across the following mainnets and testnets so far:

**Mainnets**:

- Ethereum
- Polygon POS
- Polygon zkEVM
- Linea
- Privado Mainnet

**Testnets**:

- Ethereum Sepolia
- Polygon Amoy
- Polygon zkEVM Cardona
- Linea-Sepolia
- Privado Testnet

## Unified contract addresses

|   Smart Contract Type        |                 Unified Address                   |
| :----------------------: | :----------------------------------------: |
|   **STATE**    |  0x3C9acB2205Aa72A05F6D77d708b5Cf85FCa3a896 |
|   **VALIDATOR_MTP**    | 0x27bDFFCeC5478a648f89764E22fE415486A42Ede |
| **VALIDATOR_SIG** | 0x59B347f0D3dd4B98cc2E056Ee6C53ABF14F8581b |
| **VALIDATOR_V3** | 0xd179f29d00Cd0E8978eb6eB847CaCF9E2A956336 |
| **UNIVERSAL_VERIFIER** | 0xfcc86A79fCb057A8e55C6B853dff9479C3cf607c |
| **IDENTITY_TREE_STORE** | 0x7dF78ED37d0B39Ffb6d4D527Bb1865Bf85B60f81 |


:::warning EXCEPTIONS
Itâ€™s important to note that the State contracts for the following two networks are exceptions. These contracts were already deployed at these addresses, and they are not being redeployed because they contain a significant amount of historically collected data. Redeploying them to a unified address would result in data loss, which we aim to avoid:
- Polygon Amoy State Contract: <ins>[0x1a4cC30f2aA0377b0c3bc9848766D90cb4404124](https://www.oklink.com/amoy/address/0x1a4cc30f2aa0377b0c3bc9848766d90cb4404124)</ins>
- Polygon Mainnet State Contract : <ins>[0x624ce98D2d27b20b8f8d521723Df8fC4db71D79D](https://www.oklink.com/polygon/address/0x624ce98d2d27b20b8f8d521723df8fc4db71d79d)</ins>

:::


:::info
State Contracts are used for situations where one needs to publish data on the blockchain, such as creating an MTP-type credential, generating on-chain proofs and making credential revocations effective.
Check the contract codebase and algorithms of work <ins>[docs](https://docs.iden3.io/contracts/state/)</ins>, <ins>[repository](https://github.com/iden3/contracts/tree/master/contracts/state)</ins>.
:::

:::info
More about <ins>[v3 circuit](./verifier/v3-circuit)</ins>.

Check the examples of deployment for <ins>[ v3 validator](https://github.com/0xPolygonID/contracts/blob/main/scripts/deployV3Validator.ts)</ins>
:::

## CredentialAtomicQuerySigValidator

<a href="https://github.com/iden3/contracts/blob/master/contracts/validators/CredentialAtomicQuerySigValidator.sol" target="_blank">CredentialAtomicQuerySigValidator.sol - Github</a>

The CredentialAtomicQuerySigValidator contract is used to verify any credential-related zk proof generated by user using the <a href="https://docs.iden3.io/protocol/main-circuits/#credentialAtomicQuerySigV2OnChain" target="_blank">credentialAtomicQuerySigV2OnChain</a> circuit. The contract only verifies proofs based on credential of type `Signature`

The core of the contract is its <a href="https://github.com/iden3/contracts/blob/master/contracts/validators/CredentialAtomicQuerySigValidator.sol#L53" target="_blank">verify</a> function that takes the proof generated by a user and executes a set of verifications:

- Verifies that the proof is valid. This verification is actually performed inside the 
  <a href="https://github.com/iden3/contracts/blob/master/contracts/lib/VerifierSig.sol" target="_blank">verifierSig</a> contract which is automatically generated using circom.
- Verifies that the input used to generate the proof matches the query associated to that specific Request.
- Verifies that the user's and the Issuer's identity states are valid based on the State Contract.

> The CredentialAtomicQuerySigValidator executes the same set of verifications of the [Verification Library](/docs/verifier/verification-library/verification-api-guide.md#verification---under-the-hood). The former is required when performing on-chain verification while the latter is required for off-chain verification.

## CredentialAtomicQueryMTPValidator

<a href="https://github.com/iden3/contracts/blob/master/contracts/validators/CredentialAtomicQueryMTPValidator.sol" target="_blank">CredentialAtomicQueryMTPValidator.sol - Github</a>

Performs the same set of verifications of the CredentialAtomicQuerySigValidator but for credential of type `MTP`.

> Further protocol related contracts can be found at <a href="https://docs.iden3.io/contracts/state" target="_blank">Iden3 - Smart Contracts</a>
